pval = TRUE,
ggsurvplot(km_smoke,ylim=c(0.8,1),
pval = TRUE,
conf.int = T,
risk.table = TRUE,fontsize = 3, # Add risk table
risk.table.col = "strata", # Change risk table color by groups
linetype = "strata", # Change line type by groups
surv.median.line = "hv", # Specify median survival, Allowed values include one of c(“none”, “hv”, “h”, “v”). v: vertical, h:horizontal.
ggtheme = theme_bw())
ggsurvplot(km_smoke,ylim=c(0.8,1),conf.int=F
pval = TRUE,
ggsurvplot(km_smoke,ylim=c(0.8,1),conf.int=F,
pval = TRUE,
conf.int = T,
risk.table = TRUE,fontsize = 3, # Add risk table
risk.table.col = "strata", # Change risk table color by groups
linetype = "strata", # Change line type by groups
surv.median.line = "hv", # Specify median survival, Allowed values include one of c(“none”, “hv”, “h”, “v”). v: vertical, h:horizontal.
ggtheme = theme_bw())
ggsurvplot(km_smoke,ylim=c(0.8,1),conf.int=F,
#pval = TRUE,
conf.int = T,
risk.table = TRUE,fontsize = 3, # Add risk table
risk.table.col = "strata", # Change risk table color by groups
linetype = "strata", # Change line type by groups
surv.median.line = "hv", # Specify median survival, Allowed values include one of c(“none”, “hv”, “h”, “v”). v: vertical, h:horizontal.
ggtheme = theme_bw())
km_smoke<-survfit(surv_obj~smoke,data=df)
survdiff(surv_obj~smoke,data = df)
ggsurvplot(km_smoke,
pval = TRUE,
conf.int = T,
risk.table = TRUE, # Add risk table
risk.table.col = "strata", # Change risk table color by groups
linetype = "strata", # Change line type by groups
surv.median.line = "hv", # Specify median survival, Allowed values include one of c(“none”, “hv”, “h”, “v”). v: vertical, h:horizontal.
ggtheme = theme_bw(), # Change ggplot2 theme
palette = c("#E7B800", "#2E9FDF"))
ggsurvplot(km_smoke,
pval = TRUE,
conf.int = T,
risk.table = TRUE,
fontsize=2# Add risk table
risk.table.col = "strata", # Change risk table color by groups
ggsurvplot(km_smoke,
pval = TRUE,
conf.int = T,
risk.table = TRUE,
fontsize=2,# Add risk table
risk.table.col = "strata", # Change risk table color by groups
linetype = "strata", # Change line type by groups
surv.median.line = "hv", # Specify median survival, Allowed values include one of c(“none”, “hv”, “h”, “v”). v: vertical, h:horizontal.
ggtheme = theme_bw(), # Change ggplot2 theme
palette = c("#E7B800", "#2E9FDF"))
ggsurvplot(km_smoke,
pval = TRUE,ylib=c(0.8,1),
conf.int = T,
risk.table = TRUE,
fontsize=3,# Add risk table
risk.table.col = "strata", # Change risk table color by groups
linetype = "strata", # Change line type by groups
surv.median.line = "hv", # Specify median survival, Allowed values include one of c(“none”, “hv”, “h”, “v”). v: vertical, h:horizontal.
ggtheme = theme_bw(), # Change ggplot2 theme
palette = c("#E7B800", "#2E9FDF"))
ggsurvplot(km_smoke,ylib=c(0.8,1),
pval = TRUE,
conf.int = T,
risk.table = TRUE,
fontsize=3,# Add risk table
risk.table.col = "strata", # Change risk table color by groups
linetype = "strata", # Change line type by groups
surv.median.line = "hv", # Specify median survival, Allowed values include one of c(“none”, “hv”, “h”, “v”). v: vertical, h:horizontal.
ggtheme = theme_bw(), # Change ggplot2 theme
palette = c("#E7B800", "#2E9FDF"))
ggsurvplot(km_smoke,ylib=c(0.95,1),
pval = TRUE,
conf.int = T,
risk.table = TRUE,
fontsize=3,# Add risk table
risk.table.col = "strata", # Change risk table color by groups
linetype = "strata", # Change line type by groups
surv.median.line = "hv", # Specify median survival, Allowed values include one of c(“none”, “hv”, “h”, “v”). v: vertical, h:horizontal.
ggtheme = theme_bw(), # Change ggplot2 theme
palette = c("#E7B800", "#2E9FDF"))
ggsurvplot(km_smoke,ylim=c(0.8,1),conf.int=T,
#pval = TRUE,
conf.int = T,
risk.table = TRUE,fontsize = 3, # Add risk table
risk.table.col = "strata", # Change risk table color by groups
linetype = "strata", # Change line type by groups
surv.median.line = "hv", # Specify median survival, Allowed values include one of c(“none”, “hv”, “h”, “v”). v: vertical, h:horizontal.
ggtheme = theme_bw())
ggsurvplot(km_smoke,ylim=c(0.8,1),conf.int=T,
pval = TRUE,
conf.int = T,
risk.table = TRUE,fontsize = 3, # Add risk table
risk.table.col = "strata", # Change risk table color by groups
linetype = "strata", # Change line type by groups
surv.median.line = "hv", # Specify median survival, Allowed values include one of c(“none”, “hv”, “h”, “v”). v: vertical, h:horizontal.
ggtheme = theme_bw())
ggsurvplot(km_smoke,
pval = TRUE,
conf.int = T,
risk.table = TRUE,fontsize = 3, # Add risk table
risk.table.col = "strata", # Change risk table color by groups
linetype = "strata", # Change line type by groups
surv.median.line = "hv", # Specify median survival, Allowed values include one of c(“none”, “hv”, “h”, “v”). v: vertical, h:horizontal.
ggtheme = theme_bw())
ggsurvplot(km_smoke,ylim=c(0.9,1),
pval = TRUE,
conf.int = T,
risk.table = TRUE,fontsize = 3, # Add risk table
risk.table.col = "strata", # Change risk table color by groups
linetype = "strata", # Change line type by groups
surv.median.line = "hv", # Specify median survival, Allowed values include one of c(“none”, “hv”, “h”, “v”). v: vertical, h:horizontal.
ggtheme = theme_bw())
ggsurvplot(km_smoke,ylim=c(0.9,1),
pval = TRUE,
conf.int = F,
risk.table = TRUE,fontsize = 3, # Add risk table
risk.table.col = "strata", # Change risk table color by groups
linetype = "strata", # Change line type by groups
surv.median.line = "hv", # Specify median survival, Allowed values include one of c(“none”, “hv”, “h”, “v”). v: vertical, h:horizontal.
ggtheme = theme_bw())
ggsurvplot(km_smoke,ylim=c(0.95,1),
pval = TRUE,
conf.int = T,
risk.table = TRUE,
fontsize=3,# Add risk table
risk.table.col = "strata", # Change risk table color by groups
linetype = "strata", # Change line type by groups
surv.median.line = "hv", # Specify median survival, Allowed values include one of c(“none”, “hv”, “h”, “v”). v: vertical, h:horizontal.
ggtheme = theme_bw(), # Change ggplot2 theme
palette = c("#E7B800", "#2E9FDF"))
ggsurvplot(km_smoke,ylim=c(0.95,1),
pval = TRUE,
conf.int = F,
risk.table = TRUE,
fontsize=3,# Add risk table
risk.table.col = "strata", # Change risk table color by groups
linetype = "strata", # Change line type by groups
surv.median.line = "hv", # Specify median survival, Allowed values include one of c(“none”, “hv”, “h”, “v”). v: vertical, h:horizontal.
ggtheme = theme_bw(), # Change ggplot2 theme
palette = c("#E7B800", "#2E9FDF"))
ggsurvplot(km_smoke,ylim=c(0.95,1),
pval = TRUE,
conf.int = T,
risk.table = TRUE, # Add risk table
risk.table.col = "strata", # Change risk table color by groups
linetype = "strata", # Change line type by groups
surv.median.line = "hv", # Specify median survival, Allowed values include one of c(“none”, “hv”, “h”, “v”). v: vertical, h:horizontal.
ggtheme = theme_bw())
ggsurvplot(km_smoke,ylim=c(0.95,1),
pval = TRUE,
conf.int = T,
risk.table = TRUE, # Add risk table
risk.table.col = "strata", # Change risk table color by groups
linetype = "strata", # Change line type by groups
surv.median.line = "hv", # Specify median survival, Allowed values include one of c(“none”, “hv”, “h”, “v”). v: vertical, h:horizontal.
ggtheme = theme_bw())
ATF<-survreg(surv_obj~smoke+mthage,data = df)
summary(ATF)
ATF<-survreg(surv_obj~alcohol+mthage,data = df)
summary(ATF)
summary(df)
str(df)
unique(df$education)
ATF<-survreg(surv_obj~alcohol+education,data = df)
summary(ATF)
str(df)
str(df)
unique(df$education)
ATF<-survreg(surv_obj~alcohol+education,data = df)
summary(ATF)
unique(df$education)
ATF<-survreg(surv_obj~alcohol+education,data = df)
summary(ATF)
ATF<-survreg(surv_obj~alcohol+education,data = df,dist = 'exponential')
summary(ATF)
str(df)
ATF<-survreg(surv_obj~alcohol+education,data = df,dist = 'exponential')
summary(ATF)
summary(ATF)
ATF<-survreg(surv_obj~alcohol+education,data = df)
summary(ATF)
ATF<-survreg(surv_obj~alcohol+education,data = df,dist = 'exponential')
summary(ATF)
ATF<-survreg(surv_obj~alcohol+education,data = df)
summary(ATF)
ATF<-survreg(surv_obj~alcohol+education,data = df,dist='exponential')
summary(ATF)
ATF<-survreg(surv_obj~smoke+education,data = df,dist='exponential')
summary(ATF)
exp(coef(ATF))
summary(ATF)
exp(coef(ATF))
pred<-predict(ATF,type='response')
pred[1:10]
pred<-predict(ATF,type='quantile')
pred[1:10]
pred<-predict(ATF,type='response')
df
pred<-predict(ATF,type='response')
table(pred)
table(unique())
unique(pred)
dim(df)
unique(pred)
pred<-predict(ATF,type='response',p=c(.1, .5, .9))
dim(df)
unique(pred)
pred
pred[1:10]
pred<-predict(ATF,type='quantile',p=c(.1, .5, .9))
pred[1:10]
pred<-predict(ATF,type='response',p=c(.1, .5, .9))
pred[1:10]
pred<-predict(ATF,type='quantile',p=c(.5))
pred[1:10]
pred<-predict(ATF,type='respone')
pred[1:10]
pred<-predict(ATF,type='response')
pred[1:10]
pred<-predict(ATF,type='quantile')
pred[1:10]
pred<-predict(ATF,type='quantile',p=c(.1, .5, .9))
pred[1:10]
pred<-predict(ATF,type='quantile',p=1-0.9)
pred2<-predict(ATF,type='response')
pred[1:10]
pred2[1:10]
pred<-predict(ATF,type='quantile',p=1-0.1)
pred[1:10]
pred2[1:10]
pred<-predict(ATF,type='quantile',p=1-0.9)
pred<-predict(ATF,type='quantile',p=c(.1, .5, .9))
pred[1:10]
pred[1:10]
pred2<-predict(ATF,type='response')
pred[1:10]
pred2[1:10]
pred2<-predict(ATF,type='response')
dim(df)
pred2[1:10]
pred<-predict(ATF,type='quantile',p=c(.1, .5, .9))
pred[1:10]
head(pred)
pred<-predict(ATF,type='quantile',p=c(0.1,0.5,0.9))
head(pred)
ln(2)
log(2)
ln(2)
log(16)
log(4)
ggsurvplot(ATF)
library(survminer)
ggsurvplot(ATF)
time<-1:12
pred<-predict(ATF,type="response")
pred_P<-pexp(time,rate=1/pred)
pred_P
pred_P<-1-pred_P
ggplot()+geom_line(aes(time,pred_P))
df$chldage
time<-0:12
ggplot()+geom_line(aes(time,pred_P))
pred_P
ggplot()+geom_line(aes(x=time,y=pred_P))
pred_P
time<-0:12
pred_P<-pexp(time,rate=1/pred)
pred_P<-1-pred_P
ggplot()+geom_line(aes(x=time,y=pred_P))
time
ggplot()+geom_line(aes(x=time,y=pred_P))
time<-0:12
pred<-predict(ATF,type="response")
length(pred)
ggplot()+geom_line(aes(x=time,y=pred_P))
pred_P
ggplot()+geom_point(aes(x=time,y=pred_P))
time
pred_P
length(pred)
time<-1:3385
ggplot()+geom_point(aes(x=time,y=pred_P))
ggplot()+geom_line(aes(x=time,y=pred_P))
pred_P
pred<-predict(ATF,type="response")
pred
pred[1]
pred_P<-pexp(time,rate=1/pred[1])
time<-1:12
pred_P<-pexp(time,rate=1/pred[1])
pred_P<-1-pred_P
ggplot()+geom_line(aes(x=time,y=pred_P))
pred<-predict(ATF,type='quantile',p=c(0.1,0.5,0.9))
pred_P<-pexp(time,rate=1/pred[1])
pred_P<-1-pred_P
ggplot()+geom_line(aes(x=time,y=pred_P))
ggplot()+geom_line(aes(x=time,y=pred_P))
pred_P<-pexp(time,rate=1/pred[2])
pred_P<-1-pred_P
ggplot()+geom_line(aes(x=time,y=pred_P))
mod_cox<-coxph(surv_obj~gender+age+ed,data=df)
library(ggplot2)
library(survival)
library(survminer)
df<-read.csv("survdata.csv")
str(df)
df[duplicated(df$studentid),][1]
df$X<-NULL
#sapply(df, function(x) sum(is.na(x)))
df<-na.omit(df)
df$bweight<-ifelse(df$bweight==1,"Yes","No")
factors<-c("alcohol","smoke","region","poverty","race","bweight")
df$smoke<-ifelse(df$smoke==0,0,1)
df$alcohol<-ifelse(df$alcohol==0,0,1)
df[factors] <- lapply(df[factors], factor)
surv_obj<-Surv(time = df$chldage,event = df$hospital)
km<-survfit(surv_obj~1,data=df)
summary(km)
ggsurvplot(km,fun="cumhaz",conf.int = F)
str(df)
km_region<-survfit(surv_obj~region,data=df)
ggsurvplot(km_smoke, conf.int = F,ylim=c(0.95,1))
km_smoke<-survfit(surv_obj~smoke,data=df)
survdiff(surv_obj~smoke,data = df)
ggsurvplot(km_smoke,ylim=c(0.95,1),
pval = TRUE,
conf.int = T,
risk.table = TRUE, # Add risk table
risk.table.col = "strata", # Change risk table color by groups
linetype = "strata", # Change line type by groups
surv.median.line = "hv", # Specify median survival, Allowed values include one of c(“none”, “hv”, “h”, “v”). v: vertical, h:horizontal.
ggtheme = theme_bw())
str(df)
unique(df$education)
ATF<-survreg(surv_obj~smoke+education,data = df,dist='exponential')
summary(ATF)
exp(coef(ATF))
pred<-predict(ATF,type='quantile',p=c(0.1,0.5,0.9))
head(pred)
time<-1:12
df$chldage
pred[1]
length(pred)
pred_P<-pexp(time,rate=1/pred[2])
pred_P<-1-pred_P
ggplot()+geom_line(aes(x=time,y=pred_P))+
labs(title = "Probabiliy of Survival",y="Probability")
ggplot()+geom_line(aes(x=time,y=-log(pred_P)))+
labs(title = "Probabiliy of Hazard",y="Probability")
exp(0)
mod_cox<-coxph(surv_obj~gender+age+ed,data=df)
mod_cox<-coxph(surv_obj~smoke+education,data=df)
summary(mod_cox)
colnames(df)
mod_cox<-coxph(surv_obj~smoke+education+mthage,data=df)
summary(mod_cox)
colnames(df)
mod_cox<-coxph(surv_obj~smoke+education+alcohol,data=df)
summary(mod_cox)
colnames(df)
mod_cox<-coxph(surv_obj~smoke+education+region,data=df)
summary(mod_cox)
colnames(df)
mod_cox<-coxph(surv_obj~smoke+education+poverty,data=df)
summary(mod_cox)
mod_cox<-coxph(surv_obj~smoke+education++bweight+nsibs+     +wmonth+sfmonth+agepn,data=df)
summary(mod_cox)
mod_cox<-coxph(surv_obj~smoke+education++bweight+nsibs+     +wmonth+sfmonth,data=df)
summary(mod_cox)
mod_cox<-coxph(surv_obj~smoke+education++bweight+nsibs+     +wmonth,data=df)
summary(mod_cox)
mod_cox<-coxph(surv_obj~smoke+education+nsibs+     +wmonth,data=df)
mod_cox<-coxph(surv_obj~smoke+education+nsibs +wmonth,data=df)
summary(mod_cox)
mod_cox<-coxph(surv_obj~smoke+education +wmonth,data=df)
summary(mod_cox)
+nsibs
mod_cox<-coxph(surv_obj~smoke+education+nsibs +wmonth,data=df)
summary(mod_cox)
mod_cox<-coxph(surv_obj~smoke+education+wmonth,data=df)
summary(mod_cox)
exp(coef(mod_cox))
test_z<-cox.zph(mod_cox,global = T,transform = 'rank')
test_z
str(df)
case1<-data.frame(smoke=0,education=13,wmonth=3)
survivals<-survfit(mod_cox,newdata = case1)
case1<-data.frame(smoke="0",education=13,wmonth=3)
survivals<-survfit(mod_cox,newdata = case1)
df1<-data.frame(Probability=survivals$surv,Time=survivals$time)
ggplot(df1,aes(Time,Probability))+geom_point()+ggtitle("Survival Probabilities")
df2<-data.frame(Probability=survivals$cumhaz,Time=survivals$time)
ggplot(df2,aes(Time,Probability))+geom_point()+ggtitle("Survival Probabilities")
ggplot(df2,aes(Time,Probability))+geom_point()+ggtitle("Cumulative Hazard Probabilities")
library(ggplot2)
library(survival)
library(survminer)
df<-read.csv("survdata.csv")
str(df)
df[duplicated(df$studentid),][1]
df$X<-NULL
#sapply(df, function(x) sum(is.na(x)))
df<-na.omit(df)
df$bweight<-ifelse(df$bweight==1,"Yes","No")
factors<-c("alcohol","smoke","region","poverty","race","bweight")
df$smoke<-ifelse(df$smoke==0,0,1)
df$alcohol<-ifelse(df$alcohol==0,0,1)
df[factors] <- lapply(df[factors], factor)
surv_obj<-Surv(time = df$chldage,event = df$hospital)
km<-survfit(surv_obj~1,data=df)
summary(km)
library(ggplot2)
library(survival)
library(survminer)
df<-read.csv("survdata.csv")
str(df)
df[duplicated(df$studentid),][1]
df$X<-NULL
#sapply(df, function(x) sum(is.na(x)))
df<-na.omit(df)
df$bweight<-ifelse(df$bweight==1,"Yes","No")
factors<-c("alcohol","smoke","region","poverty","race","bweight")
df$smoke<-ifelse(df$smoke==0,0,1)
df$alcohol<-ifelse(df$alcohol==0,0,1)
df[factors] <- lapply(df[factors], factor)
surv_obj<-Surv(time = df$chldage,event = df$hospital)
km<-survfit(surv_obj~1,data=df)
summary(km)
ggsurvplot(km,fun="cumhaz",conf.int = F)
str(df)
km_region<-survfit(surv_obj~region,data=df)
ggsurvplot(km_smoke, conf.int = F,ylim=c(0.95,1))
km_region<-survfit(surv_obj~region,data=df)
ggsurvplot(km_region, conf.int = F,ylim=c(0.95,1))
km_smoke<-survfit(surv_obj~smoke,data=df)
survdiff(surv_obj~smoke,data = df)
ggsurvplot(km_smoke,ylim=c(0.95,1),
pval = TRUE,
conf.int = T,
risk.table = TRUE, # Add risk table
risk.table.col = "strata", # Change risk table color by groups
linetype = "strata", # Change line type by groups
surv.median.line = "hv", # Specify median survival, Allowed values include one of c(“none”, “hv”, “h”, “v”). v: vertical, h:horizontal.
ggtheme = theme_bw())
ggsurvplot(km,fun="cumhaz",conf.int = F)
str(df)
km_region<-survfit(surv_obj~region,data=df)
ggsurvplot(km_region, conf.int = F,ylim=c(0.95,1))
km_smoke<-survfit(surv_obj~smoke,data=df)
survdiff(surv_obj~smoke,data = df)
ggsurvplot(km_smoke,ylim=c(0.95,1),
pval = TRUE,
conf.int = T,
risk.table = TRUE, # Add risk table
risk.table.col = "strata", # Change risk table color by groups
linetype = "strata", # Change line type by groups
surv.median.line = "hv", # Specify median survival, Allowed values include one of c(“none”, “hv”, “h”, “v”). v: vertical, h:horizontal.
ggtheme = theme_bw())
str(df)
unique(df$education)
ATF<-survreg(surv_obj~smoke+education,data = df,dist='exponential')
summary(ATF)
exp(coef(ATF))
pred<-predict(ATF,type='quantile',p=c(0.1,0.5,0.9))
head(pred)
time<-1:12
df$chldage
pred[1]
length(pred)
pred_P<-pexp(time,rate=1/pred[2])
pred_P<-1-pred_P
ggplot()+geom_line(aes(x=time,y=pred_P))+
labs(title = "Probabiliy of Survival",y="Probability")
ggplot()+geom_line(aes(x=time,y=-log(pred_P)))+
labs(title = "Probabiliy of Hazard",y="Probability")
time<-1:12
df$chldage
pred_P<-pexp(time,rate=1/pred[2])
pred_P<-1-pred_P
ggplot()+geom_line(aes(x=time,y=pred_P))+
labs(title = "Probabiliy of Survival",y="Probability")
ggplot()+geom_line(aes(x=time,y=-log(pred_P)))+
labs(title = "Probabiliy of Hazard",y="Probability")
library(gridExtra)
library(gridExtra)
time<-1:12
pred_P<-pexp(time,rate=1/pred[2])
pred_P<-1-pred_P
g1<-ggplot()+geom_line(aes(x=time,y=pred_P))+
labs(title = "Probabiliy of Survival",y="Probability")
g2<-ggplot()+geom_line(aes(x=time,y=-log(pred_P)))+
labs(title = "Probabiliy of Hazard",y="Probability")
grid.arrange(g1, g2,nrow=1)
exp(0)
colnames(df)
mod_cox<-coxph(surv_obj~smoke+education+wmonth,data=df)
summary(mod_cox)
exp(coef(mod_cox))
test_z<-cox.zph(mod_cox,global = T,transform = 'rank')
test_z
str(df)
case1<-data.frame(smoke="0",education=13,wmonth=3)
survivals<-survfit(mod_cox,newdata = case1)
df1<-data.frame(Probability=survivals$surv,Time=survivals$time)
df2<-data.frame(Probability=survivals$cumhaz,Time=survivals$time)
g1<-ggplot(df1,aes(Time,Probability))+geom_point()+ggtitle("Survival Probabilities")
g2<-ggplot(df2,aes(Time,Probability))+geom_point()+ggtitle("Cumulative Hazard Probabilities")
grid.arrange(g1, g2,nrow=1)
